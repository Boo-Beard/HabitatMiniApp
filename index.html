<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Habitat TG Portal</title>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
/>

<style>
  :root {
    --primary: #0EB466;
    --primary-dark: #0a8c4d;
    --primary-light: #1ae07d;
    --bg-dark: #0b1113;
    --bg-card: #081a10;
    --bg-card-light: #0d2a18;
    --text: #e6f5ee;
    --text-muted: #a0b8ac;
  }
  
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  body {
    font-family: 'Segoe UI', system-ui, sans-serif;
    background-color: var(--bg-dark);
    color: var(--text);
    padding: 16px;
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
    -webkit-tap-highlight-color: transparent;
  }
  
  .video-background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: -2;
    opacity: 0.4;
    filter: brightness(0.3) contrast(1.2);
  }
  
  .overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      45deg,
      rgba(11, 17, 19, 0.9) 0%,
      rgba(11, 17, 19, 0.7) 50%,
      rgba(11, 17, 19, 0.9) 100%
    );
    z-index: -1;
  }
  
  .container {
    max-width: 100%;
    margin: 0 auto;
    position: relative;
    z-index: 1;
  }
  
  header {
    text-align: center;
    margin-bottom: 24px;
    padding-top: 8px;
    position: relative;
  }
  
  .logo-container {
    display: flex;
    justify-content: center;
    margin-bottom: 12px;
    position: relative;
  }
  
  .logo {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid var(--primary);
    box-shadow: 0 0 20px rgba(14, 180, 102, 0.3);
    transition: transform 0.5s ease, box-shadow 0.5s ease;
    background: var(--bg-card);
  }
  
  .logo:hover {
    transform: scale(1.05);
    box-shadow: 0 0 30px rgba(14, 180, 102, 0.5);
  }
  
  h1 {
    font-size: 1.6rem;
    margin-bottom: 4px;
    background: linear-gradient(90deg, var(--primary), var(--primary-light));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    position: relative;
    display: inline-block;
  }
  
  h1::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--primary), transparent);
    opacity: 0.7;
  }
  
  .subtitle {
    color: var(--text-muted);
    font-size: 0.85rem;
    line-height: 1.4;
    margin-bottom: 4px;
  }
  
  .mission-text {
    font-style: italic;
    margin-top: 8px;
    color: var(--text-muted);
    font-size: 0.8rem;
    position: relative;
    padding: 8px 12px;
    border-radius: 8px;
    background: rgba(14, 180, 102, 0.05);
    border-left: 3px solid var(--primary);
    line-height: 1.3;
  }
  
  .stats-card {
    background: linear-gradient(145deg, var(--bg-card), var(--bg-card-light));
    border: 1px solid rgba(14, 180, 102, 0.2);
    box-shadow: 0 0 20px rgba(14, 180, 102, 0.1);
    padding: 16px;
    border-radius: 14px;
    margin-bottom: 20px;
    position: relative;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    backdrop-filter: blur(10px);
  }
  
  .stats-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(14, 180, 102, 0.15);
  }
  
  .stats-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--primary), transparent);
  }
  
  .stats-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 12px;
  }
  
  .stats-title {
    display: flex;
    align-items: center;
    font-size: 1.1rem;
    font-weight: 600;
  }
  
  .stats-title i {
    font-size: 1.3rem;
    color: var(--primary);
    margin-right: 8px;
  }
  
  .stats-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 8px;
  }
  
  .stat {
    background: rgba(0, 0, 0, 0.2);
    padding: 10px 8px;
    border-radius: 10px;
    text-align: center;
    transition: transform 0.3s ease;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(5px);
    min-height: 65px;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }
  
  .stat::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(14, 180, 102, 0.1), transparent);
    transition: left 0.5s ease;
  }
  
  .stat:hover::before {
    left: 100%;
  }
  
  .stat:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(14, 180, 102, 0.1);
  }
  
  .stat-value {
    font-size: 0.95rem;
    font-weight: bold;
    color: var(--primary);
    margin-bottom: 4px;
    position: relative;
    z-index: 1;
    line-height: 1.2;
    word-break: break-word;
  }
  
  .stat-label {
    font-size: 0.75rem;
    color: var(--text-muted);
    position: relative;
    z-index: 1;
    line-height: 1.2;
  }
  
  .pulse {
    animation: pulse 2s infinite;
  }
  
  @keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.7; }
    100% { opacity: 1; }
  }
  
  .contact-btn {
    background: transparent;
    border: 2px solid var(--primary);
    color: var(--primary);
    padding: 14px 20px;
    font-size: 1rem;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    width: 100%;
    font-weight: 600;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(5px);
    touch-action: manipulation;
  }
  
  .contact-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(14, 180, 102, 0.2), transparent);
    transition: left 0.5s ease;
  }
  
  .contact-btn:hover::before {
    left: 100%;
  }
  
  .contact-btn:hover, .contact-btn:active {
    background: var(--primary);
    color: var(--bg-dark);
    box-shadow: 0 0 20px rgba(14, 180, 102, 0.4);
    transform: translateY(-2px);
  }
  
  .contact-btn i {
    margin-right: 8px;
    font-size: 1.1rem;
  }
  
  .contact-section {
    background: linear-gradient(145deg, var(--bg-card), var(--bg-card-light));
    border: 1px solid rgba(14, 180, 102, 0.2);
    box-shadow: 0 0 20px rgba(14, 180, 102, 0.1);
    padding: 20px;
    border-radius: 14px;
    margin-top: 16px;
    display: none;
    animation: slideDown 0.5s ease-out;
    position: relative;
    backdrop-filter: blur(10px);
  }
  
  .contact-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--primary), transparent);
  }
  
  @keyframes slideDown {
    from { opacity: 0; transform: translateY(-16px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .contact-header {
    display: flex;
    align-items: center;
    margin-bottom: 16px;
  }
  
  .contact-header i {
    font-size: 1.3rem;
    color: var(--primary);
    margin-right: 8px;
  }
  
  .form-group {
    margin-bottom: 16px;
  }
  
  label {
    display: block;
    margin-bottom: 6px;
    font-weight: 600;
    color: var(--text-muted);
    font-size: 0.9rem;
  }
  
  select, textarea {
    width: 100%;
    padding: 12px;
    border-radius: 10px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    background: rgba(14, 180, 102, 0.1);
    color: var(--text);
    font-size: 0.95rem;
    transition: all 0.3s ease;
    backdrop-filter: blur(5px);
    -webkit-appearance: none;
    touch-action: manipulation;
  }
  
  /* Fix for dropdown options */
  select {
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%230EB466' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 14px;
  }
  
  /* Style the dropdown options */
  select option {
    background: var(--bg-card-light);
    color: var(--text);
    padding: 10px;
  }
  
  select:focus, textarea:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 2px rgba(14, 180, 102, 0.2);
    background: rgba(14, 180, 102, 0.15);
  }
  
  textarea {
    resize: vertical;
    min-height: 100px;
  }
  
  .submit-btn {
    background: var(--primary);
    color: var(--bg-dark);
    border: none;
    padding: 14px;
    font-size: 1rem;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    width: 100%;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    touch-action: manipulation;
  }
  
  .submit-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s ease;
  }
  
  .submit-btn:hover::before, .submit-btn:active::before {
    left: 100%;
  }
  
  .submit-btn:hover, .submit-btn:active {
    background: var(--primary-dark);
    box-shadow: 0 0 20px rgba(14, 180, 102, 0.4);
    transform: translateY(-2px);
  }
  
  .footer {
    text-align: center;
    margin-top: 24px;
    color: var(--text-muted);
    font-size: 0.75rem;
    position: relative;
  }
  
  .footer::before {
    content: '';
    position: absolute;
    top: -12px;
    left: 50%;
    transform: translateX(-50%);
    width: 80%;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(14, 180, 102, 0.3), transparent);
  }
  
  .social-links {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin-top: 12px;
  }
  
  .social-link {
    color: var(--text-muted);
    font-size: 1.1rem;
    transition: all 0.3s ease;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(14, 180, 102, 0.1);
    text-decoration: none;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(5px);
    touch-action: manipulation;
  }
  
  .social-link::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(14, 180, 102, 0.2), transparent);
    transition: left 0.5s ease;
  }
  
  .social-link:hover::before, .social-link:active::before {
    left: 100%;
  }
  
  .social-link:hover, .social-link:active {
    color: var(--primary);
    background: rgba(14, 180, 102, 0.2);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(14, 180, 102, 0.2);
  }
  
  .notification {
    position: fixed;
    bottom: 16px;
    right: 16px;
    background: var(--bg-card);
    border-left: 4px solid var(--primary);
    padding: 12px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    display: none;
    z-index: 1000;
    max-width: 280px;
    animation: slideInRight 0.5s ease-out;
    backdrop-filter: blur(10px);
    font-size: 0.9rem;
  }
  
  .notification.show {
    display: block;
  }
  
  @keyframes slideInRight {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }
  
  .refresh-btn {
    background: rgba(14, 180, 102, 0.1);
    border: 1px solid rgba(14, 180, 102, 0.3);
    color: var(--primary);
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 0.75rem;
    cursor: pointer;
    transition: all 0.3s ease;
    backdrop-filter: blur(5px);
    touch-action: manipulation;
    display: flex;
    align-items: center;
    gap: 4px;
  }
  
  .refresh-btn:hover, .refresh-btn:active {
    background: rgba(14, 180, 102, 0.2);
    transform: scale(1.05);
  }
  
  .last-updated {
    font-size: 0.65rem;
    color: var(--text-muted);
    text-align: right;
    margin-top: 4px;
  }
  
  .pulse-once {
    animation: pulse-once 0.5s ease;
  }
  
  @keyframes pulse-once {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
  }
  
  .feature-highlight {
    display: inline-block;
    background: rgba(14, 180, 102, 0.1);
    padding: 2px 6px;
    border-radius: 6px;
    margin: 0 2px;
    font-size: 0.75rem;
  }

  /* Mobile-specific optimizations */
  @media (max-width: 380px) {
    body {
      padding: 12px;
    }
    
    .stats-grid {
      grid-template-columns: 1fr;
      gap: 10px;
    }
    
    .stat {
      padding: 8px 6px;
      min-height: 60px;
    }
    
    .stat-value {
      font-size: 0.9rem;
    }
    
    .stat-label {
      font-size: 0.7rem;
    }
    
    h1 {
      font-size: 1.4rem;
    }
    
    .mission-text {
      font-size: 0.75rem;
      padding: 6px 10px;
    }
  }

  @media (min-width: 500px) {
    .container {
      max-width: 450px;
    }
  }
</style>
</head>
<body>
  <!-- Video Background -->
  <video class="video-background" autoplay muted loop playsinline>
    <source src="https://framerusercontent.com/assets/UreOLyZkP4VdWf5ix2VEYeEMms.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
  <div class="overlay"></div>
  
  <div class="container">
    <header>
      <div class="logo-container">
        <img src="https://i.ibb.co/0pbP6s1J/habitat-logo.jpg" alt="Habitat Logo" class="logo">
      </div>
      <h1>Habitat Portal</h1>
      <p class="subtitle">From the Sun to your wallet</p>
      <p class="mission-text">Habitat transforms excess renewable energy into intelligent computing infrastructures</p>
    </header>
    
    <div class="stats-card">
      <div class="stats-header">
        <div class="stats-title">
        </div>
        <button class="refresh-btn" id="refreshStats">
          <i class="fas fa-sync-alt"></i> Refresh
        </button>
      </div>
      <div class="stats-grid">
        <div class="stat">
          <div class="stat-value pulse" id="price">Loading...</div>
          <div class="stat-label">Current Price</div>
        </div>
        <div class="stat">
          <div class="stat-value pulse" id="mcap">Loading...</div>
          <div class="stat-label">Market Cap</div>
        </div>
        <div class="stat">
          <div class="stat-value" id="volume">-</div>
          <div class="stat-label">24h Volume</div>
        </div>
        <div class="stat">
          <div class="stat-value" id="change">-</div>
          <div class="stat-label">24h Change</div>
        </div>
      </div>
      <div class="last-updated" id="lastUpdated">Last updated: -</div>
    </div>
    
    <button class="contact-btn" id="contactBtn">
        <i class="fa-solid fa-envelope"></i> Contact Us
    </button>
    
    <div class="contact-section" id="contactSection">
      <div class="contact-header">
        <i class="fas fa-headset"></i>
        <h2>Get In Touch</h2>
      </div>
      
      <div class="form-group">
        <label for="topic">Topic</label>
        <select id="topic">
          <option value="General">General</option>
          <option value="Partnership">Partnership</option>
          <option value="Support">Support</option>
          <option value="Solar Investor Solutions">Solar Investor Solutions</option>
          <option value="Hardware Relocation">Hardware Relocation</option>
          <option value="Network Operations">Network Operations</option>
          <option value="Compute Buyer">Compute Buyer</option>
          <option value="Enterprise Compute">Enterprise Compute</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="message">Your Message</label>
        <textarea id="message" placeholder="Have a project, question, or partnership in mind? Let us know.."></textarea>
      </div>
      
      <button class="submit-btn" id="submit">
        Send Message
      </button>
    </div>
    
    <div class="footer">
      <p>Powered by <span class="feature-highlight">Habitat Protocol
        Version 1.0.1
      </span></p>
      <div class="social-links">
        <a href="https://x.com/HabitatProtocol"
        class="social-link"
        target="_blank"
        rel="noopener noreferrer">
        <i class="fa-brands fa-x-twitter"></i>
     </a>
     
     <a href="https://t.co/FDpS2bxL5j"
        class="social-link"
        target="_blank"
        rel="noopener noreferrer">
        <i class="fab fa-discord"></i>
     </a>
     
     <a href="https://t.co/SS67LbLmLk"
        class="social-link"
        target="_blank"
        rel="noopener noreferrer">
        <i class="fab fa-telegram"></i>
     </a>
     
     <a href="https://www.habitatprotocol.com/"
        class="social-link"
        target="_blank"
        rel="noopener noreferrer">
        <i class="fa-solid fa-desktop"></i>
     </a>
      </div>
    </div>
  </div>
  
  <div class="notification" id="notification">
    <p>Your message has been sent successfully!</p>
  </div>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
const tg = window.Telegram.WebApp;
tg.expand();

const tokenAddress = "2Bwbeh361ywi1PpypDHabDb8VphNKCQt9ht2CRzFsYAE";
const BIRDEYE_KEY = "1761b82af37542d193a02366186ab7e7";

// --- Habitat Live Stats ---
async function loadHabitatStats() {
  const priceEl  = document.getElementById('price');
  const mcapEl   = document.getElementById('mcap');
  const volEl    = document.getElementById('volume');
  const changeEl = document.getElementById('change');
  const lastUpdatedEl = document.getElementById('lastUpdated');

  // Helper: abbreviate large numbers
  function abbreviateNumber(num) {
    if (num >= 1e9) return (num / 1e9).toFixed(2).replace(/\.?0+$/, '') + 'B';
    if (num >= 1e6) return (num / 1e6).toFixed(2).replace(/\.?0+$/, '') + 'M';
    if (num >= 1e3) return (num / 1e3).toFixed(2).replace(/\.?0+$/, '') + 'K';
    return num.toLocaleString();
  }

  try {
    const res = await fetch(
      `https://public-api.birdeye.so/defi/token_overview?address=${tokenAddress}&ui_amount_mode=scaled`,
      {
        headers: {
          'Accept': 'application/json',
          'X-Chain': 'solana',
          'X-API-KEY': BIRDEYE_KEY
        }
      }
    );

    if (!res.ok) throw new Error(`HTTP ${res.status}`);
    const json = await res.json();
    if (!json.success || !json.data) throw new Error('Bad payload');

    const d = json.data;

    // Format numbers
    const price = `$${Number(d.price).toFixed(6).replace(/\.?0+$/, '')}`;
    const mcap  = `$${abbreviateNumber(d.marketCap)}`;
    const vol24 = `$${abbreviateNumber(d.v24hUSD)}`;
    const ch24  = Number(d.priceChange24hPercent || 0);

    // Remove loading pulse
    priceEl.classList.remove('pulse');
    mcapEl.classList.remove('pulse');

    // Update DOM
    priceEl.textContent  = price;
    mcapEl.textContent   = mcap;
    volEl.textContent    = vol24;
    changeEl.textContent = `${ch24.toFixed(2)}%`;
    changeEl.style.color = ch24 >= 0 ? '#0EB466' : '#ff4d4d';
    
    // Update last updated time
    const now = new Date();
    lastUpdatedEl.textContent = `Last updated: ${now.toLocaleTimeString()}`;

  } catch (err) {
    priceEl.textContent  = 'Error';
    mcapEl.textContent   = 'Error';
    volEl.textContent    = '—';
    changeEl.textContent = '—';
    console.error('Habitat stats fetch failed:', err);
  }
}

// Initial + refresh
loadHabitatStats();
setInterval(loadHabitatStats, 60000);

// Manual refresh button
document.getElementById('refreshStats').addEventListener('click', () => {
  const stats = document.querySelectorAll('.stat-value');
  stats.forEach(stat => stat.classList.add('pulse-once'));
  
  setTimeout(() => {
    stats.forEach(stat => stat.classList.remove('pulse-once'));
  }, 500);
  
  loadHabitatStats();
});

// ---- Toggle Contact Form ----
document.getElementById("contactBtn").addEventListener("click", () => {
  const contactSection = document.getElementById("contactSection");
  const contactBtn = document.getElementById("contactBtn");
  
  if (contactSection.style.display === "block") {
    contactSection.style.display = "none";
    contactBtn.innerHTML = '<i class="fa-solid fa-envelope"></i> Contact Us';
  } else {
    contactSection.style.display = "block";
    contactBtn.innerHTML = '<i class="fa-solid fa-envelope"></i> Close';
    // Scroll to form for better UX
    contactSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }
});

// ---- Submit Form ----
document.getElementById("submit").addEventListener("click", () => {
  const topic = document.getElementById("topic").value;
  const message = document.getElementById("message").value;
  
  if (!message.trim()) {
    alert("Please enter a message");
    return;
  }
  
  const data = {
    topic: topic,
    message: message
  };
  
  // Show notification
  const notification = document.getElementById('notification');
  notification.classList.add('show');
  
  // Simulate sending
  setTimeout(() => {
    tg.sendData(JSON.stringify(data));  // sends data to Flow XO
    notification.querySelector('p').textContent = "Message sent successfully!";
    
    // Close after delay
    setTimeout(() => {
      tg.close();
    }, 1500);
  }, 1000);
});

// Add smooth scrolling for better UX
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function (e) {
    e.preventDefault();
    document.querySelector(this.getAttribute('href')).scrollIntoView({
      behavior: 'smooth'
    });
  });
});

// Prevent zoom on double-tap for mobile
document.addEventListener('touchstart', function(e) {
  if (e.touches.length > 1) {
    e.preventDefault();
  }
}, { passive: false });

let lastTouchEnd = 0;
document.addEventListener('touchend', function(e) {
  const now = (new Date()).getTime();
  if (now - lastTouchEnd <= 300) {
    e.preventDefault();
  }
  lastTouchEnd = now;
}, false);
</script>
</body>
</html>